<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <title>View Cart - Delicacy</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="icon" href="images/weblogo.png" />

    <link rel="stylesheet" href="css/navbar.css" />
    <link rel="stylesheet" href="css/cart.css" />
  </head>
  <body>
    <header class="navbar">
      <!-- Logo -->
      <div class="logo">
        <img src="images/weblogo.png" />
      </div>

      <!-- Search Box -->
      <div class="search-box">
        <input type="text" placeholder="Search Products" />
        <i class="fas fa-search"></i>
      </div>

      <!-- Desktop Links -->
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>

      <!-- Dropdowns -->
      <div class="dropdown-container">
        <!-- My Cart Dropdown -->
        <div class="dropdown">
          <div class="dropdown-toggle my-cart">
            <i class="fas fa-shopping-cart"></i
            ><a href="cart.html" class="mycart-link">My Cart</a>
          </div>
        </div>

        <!-- Profile Dropdown -->
        <div class="dropdown">
          <div class="dropdown-toggle profile-toggle">
            <img src="images/userprofile.jpg" class="profile-img" />
            <span>User</span>
            <i class="fas fa-chevron-down rotate-icon"></i>
          </div>
          <ul class="dropdown-menu">
            <li><a href="settings.html">Settings</a></li>

            <li><a href="userorders.html">My Orders</a></li>
            <li><a href="signup.html">Sign Up</a></li>
            <li><a href="signin.html">Login</a></li>
            <li><a href="#">Logout</a></li>
          </ul>
        </div>
      </div>

      <!-- Hamburger Icon -->
      <div class="menu-icon">
        <input class="menu-icon__cheeckbox" id="hamburger" type="checkbox" />
        <div>
          <span></span>
          <span></span>
        </div>
      </div>
    </header>

    <!-- Mobile Slide Menu -->
    <div class="mobile-slide-menu" id="mobileMenu">
      <div class="search-container">
        <input type="text" placeholder="Search Products" />
        <i class="fas fa-search icon"></i>
      </div>

      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
    <!-- Start Body -->
    <div class="cartContainer">
      <!-- Cart List -->
      <div class="cartBox">
        <div class="cartHeadBox">
          <span>Items</span>
          <span id="cart-count">2 Products</span>
        </div>
        <div class="cartItemsBox" id="cart-items">
          <div class="cartRowBox" data-price="12">
            <div class="itemThumbBox">
              <img src="images/shop-images/fresh-beef.webp" alt="Food" />
            </div>
            <div>
              <div class="itemTitleBox">200g Beef</div>
              <div class="itemMetaBox">Organic & Fresh</div>
            </div>
            <div class="itemPriceBox">
              $<span class="line-price">12.00</span>
            </div>
            <div class="itemQtyBox">
              <button class="qty-minus">-</button>
              <input type="text" value="1" class="qty-input" />
              <button class="qty-plus">+</button>
            </div>
            <div class="removeBtnBox">&times;</div>
          </div>

          <div class="cartRowBox" data-price="8">
            <div class="itemThumbBox">
              <img src="images/shop-images/fresh-salad.jpg" alt="Food" />
            </div>
            <div>
              <div class="itemTitleBox">Fresh Salad</div>
              <div class="itemMetaBox">Organic Veggies</div>
            </div>
            <div class="itemPriceBox">
              $<span class="line-price">16.00</span>
            </div>
            <div class="itemQtyBox">
              <button class="qty-minus">-</button>
              <input type="text" value="2" class="qty-input" />
              <button class="qty-plus">+</button>
            </div>
            <div class="removeBtnBox">&times;</div>
          </div>
        </div>
      </div>

      <!-- Summary -->
      <div class="summaryBox">
        <div class="summaryTitleBox">Order Summary</div>
        <div class="summaryRowBox">
          <span>Subtotal</span><span id="subtotal">$28.00</span>
        </div>
        <div class="summaryRowBox">
          <span>Delivery</span><span id="delivery">$3.00</span>
        </div>
        <div class="summaryRowBox">
          <span>Tax</span><span id="tax">$1.50</span>
        </div>
        <div class="summaryTotalBox">
          <span>Total</span><span id="total">$32.50</span>
        </div>

        <div class="discount-text">
          <span>Get 10% Off With OFF10</span>
        </div>

        <div class="couponBox">
          <input type="text" id="coupon-input" placeholder="Promo code" />
          <button id="apply-coupon">Apply</button>
        </div>
        <div class="couponMsg" id="coupon-msg"></div>
        <a href="checkout.html">
          <button class="checkoutBtnBox">Proceed to Checkout</button>
        </a>
      </div>
    </div>

    <script>
      let discount = 0; // global discount value

      function updateCart() {
        let rows = document.querySelectorAll(".cartRowBox");
        let subtotal = 0;
        rows.forEach((row) => {
          let unitPrice = parseFloat(row.dataset.price);
          let qty = parseInt(row.querySelector(".qty-input").value);
          if (qty < 1) qty = 1;
          let lineTotal = unitPrice * qty;
          row.querySelector(".line-price").textContent = lineTotal.toFixed(2);
          subtotal += lineTotal;
        });

        // Apply discount
        let discountedSubtotal = subtotal - subtotal * discount;
        document.getElementById("subtotal").textContent =
          "$" + discountedSubtotal.toFixed(2);

        let delivery = 3.0;
        let tax = discountedSubtotal * 0.05;
        document.getElementById("tax").textContent = "$" + tax.toFixed(2);
        let total = discountedSubtotal + delivery + tax;
        document.getElementById("total").textContent = "$" + total.toFixed(2);

        document.getElementById("cart-count").textContent =
          rows.length + " Products";
      }

      // quantity buttons
      document.querySelectorAll(".qty-plus").forEach((btn) => {
        btn.addEventListener("click", () => {
          let input = btn.parentElement.querySelector(".qty-input");
          input.value = parseInt(input.value) + 1;
          updateCart();
        });
      });
      document.querySelectorAll(".qty-minus").forEach((btn) => {
        btn.addEventListener("click", () => {
          let input = btn.parentElement.querySelector(".qty-input");
          input.value = Math.max(1, parseInt(input.value) - 1);
          updateCart();
        });
      });
      // remove item
      document.querySelectorAll(".removeBtnBox").forEach((btn) => {
        btn.addEventListener("click", () => {
          btn.parentElement.remove();
          updateCart();
        });
      });

      // apply coupon
      document.getElementById("apply-coupon").addEventListener("click", () => {
        let code = document
          .getElementById("coupon-input")
          .value.trim()
          .toUpperCase();
        let msg = document.getElementById("coupon-msg");
        if (code === "OFF10") {
          discount = 0.1;
          msg.textContent = "Coupon applied: 10% OFF!";
          msg.className = "couponMsg success";
        } else {
          discount = 0;
          msg.textContent = "Invalid coupon code!";
          msg.className = "couponMsg error";
        }
        updateCart();
      });

      updateCart();
    </script>

    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

    <!-- Link to script.js file  -->
    <script src="js/script.js"></script>
  </body>
</html>
